#include <Windows.h>
#include <stdio.h>

DWORD WINAPI MyThread(LPVOID arg) {
	while (1) { printf("반복 스레드2!!!\n"); };
	return 0;
}

int main() {
	// CPU 개수를 알아낸다.
	SYSTEM_INFO si;
	GetSystemInfo(&si);

	// CPU 개수만큼 스레드를 생성한다.
	for (int i = 0; i < (int)si.dwNumberOfProcessors; i++) {
		HANDLE hTread = CreateThread(NULL, 0, MyThread, NULL, 0, NULL);
		if (hTread = NULL) return 1;
		// 최고 우선 순위로 변경한다.
		SetThreadPriority(hTread, THREAD_PRIORITY_TIME_CRITICAL);
		CloseHandle(hTread);
	}

	Sleep(1000);
	while (1) { printf("주 스레드 실행!\n"); break; }

	return 0;
}